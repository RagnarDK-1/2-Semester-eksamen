Ragnar
ragnardnk
Online

Lars — 28/05/2025 12:23
<?php
// Databaseoplysninger
$host = 'localhost';
$db = 'din_database';
$user = 'din_bruger';
$pass = 'dit_password';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelse
if ($conn->connect_error) {
    die("Forbindelse fejlede: " . $conn->connect_error);
}

// Udfør SQL-opdatering
$sql = "UPDATE din_tabel SET felt = 'ny værdi' WHERE betingelse = 'noget'";
if ($conn->query($sql) === TRUE) {
    echo "Database opdateret!";
} else {
    echo "Fejl: " . $conn->error;
}

$conn->close();
?>
<!DOCTYPE html>
<html>
<head>
    <title>Ændr i database</title>
</head>
<body>
    <button onclick="sendData()">Opdater database</button>

    <script>
        function sendData() {
            fetch('update.php', {
                method: 'POST'
            })
            .then(response => response.text())
            .then(data => alert(data))
            .catch(error => console.error('Fejl:', error));
        }
    </script>
</body>
</html>
Lars — 28/05/2025 13:35
sudo nano /etc/nginx/sites-available/default
location ~ .php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/run/php/php8.2-fpm.sock; # brug korrekt PHP-version
}
GRANT UPDATE ON din_database.din_tabel TO 'din_bruger'@'localhost';
FLUSH PRIVILEGES;
<?php phpinfo(); ?>
Lars — 28/05/2025 13:43
<button onclick="fetch('update.php', {method: 'POST'})">Opdater database</button>
Lars — 28/05/2025 13:59
[Error] Failed to load resource: the server responded with a status of 405 (Not Allowed) (update.php, line 0)
<?php
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

echo "POST modtaget!";  // Test-svar
Vims — 28/05/2025 14:08
PHP - <?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
Expand
message.txt
5 KB
Lars — 28/05/2025 14:16
<?php
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}
echo "POST virker!";
Vims — 28/05/2025 14:18
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
4 KB
Lars — 28/05/2025 14:19
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
5 KB
Vims — 28/05/2025 14:23
server {
        listen 80 default_server;
        listen [::]:80 default_server;

        root /var/www/html;

        # Tilføj index.php til listen, hvis du bruger PHP
        index index.php index.html index.htm;

        servername ;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        # Pass PHP scripts to FastCGI server
        location ~ .php$ {
                include snippets/fastcgi-php.conf;
                fastcgi_pass unix:/run/php/php8.1-fpm.sock;
        }

        # Begræns metoder til kun GET
        limit_except GET POST {
                allow all;
        }

        # Forbud mod adgang til .htaccess-filer, hvis Apache document root
        # er samme som nginx
        #
        #location ~ /.ht {
        #       deny all;
        #}
}
Lars — 28/05/2025 14:27
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    root /var/www/html;
    index index.php index.html index.htm;

    servername ;

    location / {
        try_files $uri $uri/ =404;
    }

    location ~ .php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/run/php/php8.1-fpm.sock;
    }

    # Fjernede limit_except, så både GET og POST er tilladt
}
\
Vims — 28/05/2025 14:32
<?php
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}
echo "POST virker!";
php8.1-fpm.service - The PHP 8.1 FastCGI Process Manager
     Loaded: loaded (/lib/systemd/system/php8.1-fpm.service; enabled; vendor preset: enabled)
     Active: active (running) since Wed 2025-05-28 11:38:29 UTC; 57min ago
       Docs: man:php-fpm8.1(8)
   Main PID: 2618580 (php-fpm8.1)
     Status: "Processes active: 0, idle: 2, Requests: 0, slow: 0, Traffic: 0req/sec"
Expand
message.txt
3 KB
regex to split $uri to $fastcgi_script_name and $fastcgi_path
fastcgi_split_path_info ^(.+?.php)(/.*)$;

Check that the PHP script exists before passing it
try_files $fastcgi_script_name =404;

Bypass the fact that try_files resets $fastcgi_path_info
see: http://trac.nginx.org/nginx/ticket/321
set $path_info $fastcgi_path_info;
fastcgi_param PATH_INFO $path_info;

fastcgi_index index.php;
include fastcgi.conf;
Lars — 28/05/2025 15:59
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Databaseoplysninger
$host = 'localhost';
$db = 'ølbord';
$user = 'admin';
$pass = 'admin';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelse
if ($conn->connect_error) {
    die("Forbindelse fejlede: " . $conn->connect_error);
}

// Udfør SQL-opdatering
$sql = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = '1'";
if ($conn->query($sql) === TRUE) {
    echo "Database opdateret!";
} else {
    echo "Fejl: " . $conn->error;
}

$conn->close();
?>
Ragnar
 started a call that lasted 11 minutes. — 29/05/2025 09:05
Ragnar — 29/05/2025 09:09
jeg har hverken motoren eller flowmåleren
Lars — 29/05/2025 09:56
Åhhh
Vims — 29/05/2025 10:34
Kan en af jer ik sende eksamens opgaven fra sidste semester? Er på stationæren, og gider næsten ikke finde bærbaren
Ragnar — 29/05/2025 10:34
https://docs.google.com/document/d/1rWZJijIqQcR_liY9qREj4pFv_QtZ4McCiezgd2707IQ/edit?usp=sharing
Vims — 29/05/2025 10:35
Nåeh ja skuda
Ahaha
Tak
Lars — 29/05/2025 11:15
12 sider nu med rå tekst
Vims — 29/05/2025 11:15
Det sku meget fint. Tænker godt vi kan blive færdige med at skrive i morgen
Lars — 29/05/2025 11:18
Jaa
Lars — 29/05/2025 17:28
Regner vi med at komme på skolen i morgen?
Vi skal have knappen til at åbne og lukke indtil næste uge
Vi kan ogs gøre det på mandag. Men vi skal have rapporten klar d.2 tænker jeg
Vi kan evt spørge Thor om han kan tjekke om skolen har åbent. Og så tage derhen?
Ragnar — 29/05/2025 17:49
ja jeg tænker, at vi mødes imorgen, har fået sat motor scriptet op, skal bare have motoren til at teste
Lars — 29/05/2025 17:49
Feeedt
Og knappen? Eller skal jeg lave den i morgen
Ragnar — 29/05/2025 17:50
knappen har jeg ikke, har bare lavet funktionen til at motoren skal dreje når DB ændre sig fra 0 -> 1 og omvendt
Lars — 29/05/2025 17:50
Super
Jeg kan lave resten på sådan 10 min hvis jeg har en computer der kan kopiere og indsætte i terminalen
Vims — 29/05/2025 19:06
Ahaha, du kan sagtens bruge min
Lars — 29/05/2025 19:07
Tak!!
Ragnar — 29/05/2025 21:57
Ja, så bliver det jo svært, at VIde hvornår vi skal være der. Også noget fucking lort de ikke spørger om vi skal være på skolen og så fortælle os hvornår vi skal være der for at blive lukket ind. Hvad hvis man skal lodde? Vi skal blandt andet lodde en resistor på igen, fordi den er slået sig løs..
Lars — 29/05/2025 21:58
Jeg ved ik hvad vi skal gøre
Ragnar — 29/05/2025 21:58
1 helligdag, og så vælger man at lukke skolen, fordi det er dagen efter en helligdag
Vims — 29/05/2025 21:58
Tror vi ikke bare de har åbent som normalt?
Ragnar — 29/05/2025 21:58
Ved jeg ikke
Men det er for sløset
Lars — 29/05/2025 21:58
Skal vi satse på de har åbent? Der må jo være nogen på skolen
Vims — 29/05/2025 21:58
Det ihverfald ikke nemt at følge med i
Lars — 29/05/2025 21:59
Og så få en random til at låse op
Vims — 29/05/2025 21:59
Jeg tænker jeg er klar på satsen
Ragnar — 29/05/2025 21:59
Endnu en tråd på "klagen"
Lars — 29/05/2025 21:59
Kl 10 på skolen i morgen?
Ragnar — 29/05/2025 21:59
Ja, vi skal jo være færdige imorgen med produktet
Lars — 29/05/2025 21:59
Ja helst
Vims — 29/05/2025 21:59
Yes
Vims — 30/05/2025 10:06
Er i landet?
Lars — 30/05/2025 10:07
Ja
Vims — 30/05/2025 10:08
Hvor er I?
Ragnar — 30/05/2025 10:14
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Databaseoplysninger
$host = 'localhost';
$db = 'ølbord';
$user = 'admin';
$pass = 'admin';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelse
if ($conn->connect_error) {
    die("Forbindelse fejlede: " . $conn->connect_error);
}

// Udfør SQL-opdatering
$sql = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = '1'";
if ($conn->query($sql) === TRUE) {
    echo "Database opdateret!";
} else {
    echo "Fejl: " . $conn->error;
}

$conn->close();
?>
Vims — 30/05/2025 10:20
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
4 KB
Lars — 30/05/2025 10:21
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Databaseoplysninger
$host = 'localhost';
$db = 'ølbord';
$user = 'admin';
$pass = 'admin';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);
if ($conn->connect_error) {
    die("Forbindelse fejlede: " . $conn->connect_error);
}

// Hvilken funktion er ønsket?
$action = $_POST['action'] ?? '';

if ($action === 'reset') {
    // Nulstil liter_drukket
    $sql = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = '1'";
    if ($conn->query($sql) === TRUE) {
        echo "Liter drukket nulstillet.";
    } else {
        echo "Fejl ved nulstilling: " . $conn->error;
    }
} elseif ($action === 'toggle_motor') {
    // Toggle motor_kontrol værdi
    $res = $conn->query("SELECT værdi FROM motor_kontrol WHERE id = 1");
    if ($res && $res->num_rows > 0) {
        $row = $res->fetch_assoc();
        $ny_vaerdi = ($row['værdi'] == 0) ? 1 : 0;
        $sql = "UPDATE motor_kontrol SET værdi = '$ny_vaerdi' WHERE id = 1";
        if ($conn->query($sql) === TRUE) {
            echo "Motorværdi sat til $ny_vaerdi.";
        } else {
            echo "Fejl ved opdatering af motorværdi: " . $conn->error;
        }
    } else {
        echo "Motorværdi kunne ikke læses.";
    }
} else {
    echo "Ugyldig handling.";
}

$conn->close();
?>
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
5 KB
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Hent action
$action = $_POST['action'] ?? '';

// Databaseoplysninger
$host = 'localhost';
$db = 'ølbord';
$user = 'admin';
$pass = 'admin';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelse
if ($conn->connect_error) {
    http_response_code(500);
    die("Forbindelse fejlede: " . $conn->connect_error);
}

if ($action === 'reset') {
    // Nulstil liter_drukket
    $sql = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = 1";
    if ($conn->query($sql) === TRUE) {
        echo "Liter nulstillet!";
    } else {
        http_response_code(500);
        echo "Fejl ved nulstilling: " . $conn->error;
    }

} elseif ($action === 'toggle_motor') {
    // Hent nuværende værdi
    $sql = "SELECT værdi FROM motor_kontrol WHERE id = 1";
    $result = $conn->query($sql);

    if ($result && $row = $result->fetch_assoc()) {
        $currentValue = (int)$row['værdi'];
        $newValue = $currentValue === 1 ? 0 : 1;

        $updateSql = "UPDATE motor_kontrol SET værdi = $newValue WHERE id = 1";
        if ($conn->query($updateSql) === TRUE) {
            echo "Motorværdi ændret til $newValue";
        } else {
            http_response_code(500);
            echo "Fejl ved opdatering: " . $conn->error;
        }
    } else {
        http_response_code(500);
        echo "Kunne ikke hente nuværende motorværdi";
    }

} else {
    http_response_code(400);
    echo "Ugyldig handling";
}

$conn->close();
?>
Lars — 30/05/2025 10:30
<?php
// Vis fejl under udvikling
ini_set('display_errors', 1);
error_reporting(E_ALL);

// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Hent action
$action = $_POST['action'] ?? '';

// Databaseoplysninger
$host = 'localhost';
$db = 'ølbord';
$user = 'admin';
$pass = 'admin';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelse
if ($conn->connect_error) {
    http_response_code(500);
    die("Forbindelse fejlede: " . $conn->connect_error);
}

if ($action === 'reset') {
    // Nulstil liter_drukket
    $sql = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = 1";
    if ($conn->query($sql) === TRUE) {
        echo "Liter nulstillet!";
    } else {
        http_response_code(500);
        echo "Fejl ved nulstilling: " . $conn->error;
    }

} elseif ($action === 'toggle_motor') {
    // Hent nuværende vaerdi
    $sql = "SELECT vaerdi FROM motor_kontrol WHERE id = 1";
    $result = $conn->query($sql);

    if ($result && $row = $result->fetch_assoc()) {
        $currentValue = (int)$row['vaerdi'];
        $newValue = $currentValue === 1 ? 0 : 1;

        $updateSql = "UPDATE motor_kontrol SET vaerdi = $newValue WHERE id = 1";
        if ($conn->query($updateSql) === TRUE) {
            echo "Motorværdi ændret til $newValue";
        } else {
            http_response_code(500);
            echo "Fejl ved opdatering: " . $conn->error;
        }
    } else {
        http_response_code(500);
        echo "Kunne ikke hente nuværende motorværdi";
    }

} else {
    http_response_code(400);
    echo "Ugyldig handling";
}

$conn->close();
?>
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Forbindelse til 'ølbord' databasen
$conn1 = new mysqli('localhost', 'admin', 'admin', 'ølbord');
if ($conn1->connect_error) {
    die("Forbindelse til ølbord fejlede: " . $conn1->connect_error);
}

// Forbindelse til 'motor' databasen
$conn2 = new mysqli('localhost', 'admin', 'admin', 'motor');
if ($conn2->connect_error) {
    die("Forbindelse til motor fejlede: " . $conn2->connect_error);
}

// Håndter nulstilling af liter_drukket
if (isset($_POST['reset'])) {
    $sql1 = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = 1";
    if (!$conn1->query($sql1)) {
        die("Fejl ved opdatering af liter: " . $conn1->error);
    }
}

// Håndter toggling af motor_kontrol værdi
if (isset($_POST['toggle'])) {
    $result = $conn2->query("SELECT vaerdi FROM motor_kontrol WHERE id = 1");
    if ($result && $row = $result->fetch_assoc()) {
        $ny_vaerdi = $row['vaerdi'] == 1 ? 0 : 1;
        $sql2 = "UPDATE motor_kontrol SET vaerdi = '$ny_vaerdi' WHERE id = 1";
        if (!$conn2->query($sql2)) {
            die("Fejl ved toggling: " . $conn2->error);
        }
    } else {
        die("Fejl ved læsning af motor_kontrol: " . $conn2->error);
    }
}

echo "Database(r) opdateret!";
$conn1->close();
$conn2->close();
?>
Lars — 30/05/2025 10:37
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
3 KB
<?php
// Tjek at metoden er POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST tilladt";
    exit;
}

// Forbind til ølbord-databasen for at nulstille liter
$host = 'localhost';
$user = 'admin';
$pass = 'admin';

// Første forbindelse: Ølbord DB
$conn1 = new mysqli($host, $user, $pass, 'ølbord');
if ($conn1->connect_error) {
    die("Forbindelse til ølbord fejlede: " . $conn1->connect_error);
}

$sql1 = "UPDATE drikke_logg SET liter_drukket = '0.0' WHERE id = '1'";
$res1 = $conn1->query($sql1);

// Anden forbindelse: Motor DB
$conn2 = new mysqli($host, $user, $pass, 'motor');
if ($conn2->connect_error) {
    die("Forbindelse til motor fejlede: " . $conn2->connect_error);
}

$sql2 = "SELECT vaerdi FROM motor_kontrol WHERE id = 1";
$result = $conn2->query($sql2);

if ($result && $result->num_rows > 0) {
    $row = $result->fetch_assoc();
    $nyVaerdi = ($row['vaerdi'] == 1) ? 0 : 1;

    $opdater = "UPDATE motor_kontrol SET vaerdi = $nyVaerdi WHERE id = 1";
    if ($conn2->query($opdater) === TRUE) {
        echo "Liter nulstillet og motorværdi skiftet til $nyVaerdi!";
    } else {
        echo "Fejl ved opdatering af motor: " . $conn2->error;
    }
} else {
    echo "Kunne ikke hente motorværdi";
}

$conn1->close();
$conn2->close();
?>
Lars — 30/05/2025 10:47
<?php
// Kun tillad POST
if ($_SERVER['REQUEST_METHOD'] !== 'POST') {
    http_response_code(405);
    echo "Kun POST-metoden er tilladt.";
    exit;
}

// Databaseoplysninger til motor-databasen
$host = 'localhost';
$user = 'admin';
$pass = 'admin';
$db = 'motor';

// Opret forbindelse
$conn = new mysqli($host, $user, $pass, $db);

// Tjek forbindelsen
if ($conn->connect_error) {
    http_response_code(500);
    echo "Databaseforbindelse fejlede: " . $conn->connect_error;
    exit;
}

// Hent nuværende værdi
$result = $conn->query("SELECT vaerdi FROM motor_kontrol WHERE id = 1");

if ($result && $row = $result->fetch_assoc()) {
    $nyVaerdi = ($row['vaerdi'] == 1) ? 0 : 1;

    // Opdater værdi
    if ($conn->query("UPDATE motor_kontrol SET vaerdi = $nyVaerdi WHERE id = 1") === TRUE) {
        echo "Motorværdi ændret til $nyVaerdi";
    } else {
        http_response_code(500);
        echo "Fejl ved opdatering: " . $conn->error;
    }
} else {
    http_response_code(500);
    echo "Kunne ikke hente nuværende motorværdi.";
}

$conn->close();
?>
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
5 KB
Lars — 30/05/2025 11:04
<?php
// Vis fejl (kun til test)
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

// Database detaljer
$servername = "localhost";  // prøv evt. "127.0.0.1" hvis localhost ikke virker
$username = "admin";        // ret til dit brugernavn
$password = "admin";        // ret til dit password
$dbname = "motor";

// Opret forbindelse
$conn = new mysqli($servername, $username, $password, $dbname);

// Tjek forbindelsen
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

// Hent den aktuelle værdi for ID=1
$sql_select = "SELECT vaerdi FROM motor_kontrol WHERE id = 1";
$result = $conn->query($sql_select);

if ($result->num_rows > 0) {
    $row = $result->fetch_assoc();
    $currentValue = (int)$row['vaerdi'];
    echo "Nuværende værdi: $currentValue<br>";

    // Skift 1 til 0 eller 0 til 1
    $newValue = $currentValue === 1 ? 0 : 1;

    $sql_update = "UPDATE motor_kontrol SET vaerdi = $newValue WHERE id = 1";

    if ($conn->query($sql_update) === TRUE) {
        echo "Værdi opdateret til: $newValue";
    } else {
        echo "Fejl ved opdatering: " . $conn->error;
    }
} else {
    echo "Ingen data fundet med id=1";
}

$conn->close();
?>
GRANT ALL PRIVILEGES ON motor.* TO 'admin'@'localhost' IDENTIFIED BY 'admin';
Vims — 30/05/2025 11:25
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
5 KB
Lars — 30/05/2025 11:26
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
Expand
message.txt
5 KB
Vims — Yesterday at 20:27
Hva tid og hvor tænker vi at mødes?
Ragnar — Yesterday at 20:27
skolen klokken 9
Lars — Yesterday at 20:27
Hhhmm
Ragnar — Yesterday at 20:27
få lavet lortet færdig?
Vims — Yesterday at 20:27
Aha, aftale
Lars — Yesterday at 20:27
Skal vi ik prøve at sætte tingene på bordet med fustage?
Det vel ogs ret vigtigt at se om det hele virker med flowmpleren der måler det rigtigt osv
Ragnar — Yesterday at 20:28
det har vi andre dage til også. Vi skal aflevere rapporten tirsdag
Lars — Yesterday at 20:28
Men hvis vi skriver noget forkert i rapporten. Det så ender med at de ik virker.
Vi kan sagtens vente med bordet hvis det er
Jeg er ligeglad
Ragnar — Yesterday at 20:29
Det der sker på bordet som ikke følger med i rapporten er jo bare fejlkilde vi kan nævne
Lars — Yesterday at 20:29
Bare nederen at have fejlkilder at nævne hvis de ik behøver at være der
Ragnar — Yesterday at 20:29
prioritet nr.1 er rapporten.
Lars — Yesterday at 20:29
Men jo. Lad os gøre rapporten færdig
Vims — Yesterday at 20:29
Yes
Lars — Yesterday at 20:29
Yes
Vims — 08:58
Hvor langt er I?
Lars — 08:59
Vi kan se skolen fra motorvejen. Vi er der om 5
Vims — 09:00
Luksus. Jeg kan ikke få jer til at køre forbi tanken og tage en lighter med?
Lars — 09:00
Det Ka’ vi godt
Vims — 09:00
Dejligt
Ragnar — 12:04
https://pro.easyeda.com/editor
Vims — 12:17
import mariadb
import time
import json

DB_USER = "admin"
DB_PASSWORD = "admin"
DB_HOST = "localhost"
DB_PORT = 3306
DATA_JSON_PATH = "data.json"

def hent_liter_drukket():
    try:
        conn = mariadb.connect(
            user=DB_USER,
            password=DB_PASSWORD,
            host=DB_HOST,
            port=DB_PORT,
            database="ølbord"
        )
        cur = conn.cursor()
        cur.execute("SELECT liter_drukket FROM drikke_logg WHERE id = 1")
        result = cur.fetchone()
        conn.close()
        return float(result[0]) if result else 0.0
    except:
        return 0.0

def hent_pris_carlsberg():
    try:
        conn = mariadb.connect(
            user=DB_USER,
            password=DB_PASSWORD,
            host=DB_HOST,
            port=DB_PORT,
            database="øl"
        )
        cur = conn.cursor()
        cur.execute("SELECT price FROM øl WHERE id = 5")
        result = cur.fetchone()
        conn.close()
        return float(result[0]) if result else 0.0
    except:
        return 0.0

if name == "main":
   try:
        while True:
            liter = hent_liter_drukket()
            pris = hent_pris_carlsberg()
            data = {
                "liter": round(liter, 2),
                "total_price": round(liter * pris, 2)
            }
            with open(DATA_JSON_PATH, "w") as f:
                json.dump(data, f)
            time.sleep(1)
    except KeyboardInterrupt:
        print("Stopper...")
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
    :root {
      --taphus-gul: #fcebb4;
      --tekst-sort: #1e1e1e;
    }

    video#bg-video {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background-color: var(--taphus-gul);
      position: relative;
      z-index: 0;
    }

    header {
      background-color: var(--taphus-gul);
      color: var(--tekst-sort);
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding: 20px 40px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    header .logo {
   font-size: 2.2rem;
      letter-spacing: 2px;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 30px;
      padding: 40px 20px;
    }

    .row {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .box {
      background-color: var(--taphus-gul);
      border: 2px solid #e6d59c;
      border-radius: 15px;
      padding: 30px;
      width: 300px;
      text-align: center;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      color: var(--tekst-sort);
    }

    .box h2 {
      margin: 0 0 15px;
      font-size: 20px;
    }

    .box p {
      font-size: 32px;
      font-weight: bold;
      margin: 0;
    }

    button {
      padding: 12px 24px;
   font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      border: none;
      transition: background-color 0.3s;
    }

    button:hover {
... (104 lines left)
Collapse
message.txt
5 KB
﻿
<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Taphuset</title>
  <style>
    :root {
      --taphus-gul: #fcebb4;
      --tekst-sort: #1e1e1e;
    }

    video#bg-video {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background-color: var(--taphus-gul);
      position: relative;
      z-index: 0;
    }

    header {
      background-color: var(--taphus-gul);
      color: var(--tekst-sort);
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding: 20px 40px;
      font-size: 1.2rem;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    header .logo {
   font-size: 2.2rem;
      letter-spacing: 2px;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 30px;
      padding: 40px 20px;
    }

    .row {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .box {
      background-color: var(--taphus-gul);
      border: 2px solid #e6d59c;
      border-radius: 15px;
      padding: 30px;
      width: 300px;
      text-align: center;
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      color: var(--tekst-sort);
    }

    .box h2 {
      margin: 0 0 15px;
      font-size: 20px;
    }

    .box p {
      font-size: 32px;
      font-weight: bold;
      margin: 0;
    }

    button {
      padding: 12px 24px;
   font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      background-color: #4CAF50;
      color: white;
      border: none;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

    footer {
      background-color: var(--taphus-gul);
      color: var(--tekst-sort);
      text-align: center;
      padding: 10px 0;
      position: relative;
      z-index: 1;
    }
  </style>
</head>
<body>

  <video autoplay muted loop id="bg-video">
    <source src="baggrund.mp4" type="video/mp4" />
    Din browser understøtter ikke video.
  </video>

  <header>
    <div class="logo">Taphuset</div>
  </header>

  <main>
    <div class="row">
      <div class="box">
        <h2>Liter drukket</h2>
        <p id="liter">0.00 L</p>
      </div>

      <div class="box">
        <h2>Pris for drukket øl</h2>
        <p id="pris">0.00 DKK</p>
      </div>
  </div>

    <div class="row">
      <div class="box">
        <h2>Nulstil data</h2>
        <button onclick="opdaterDatabase()">Nulstil liter drukket</button>
      </div>

      <div class="box">
        <h2>Åben for ventil</h2>
        <button onclick="toggleMotor()">Åben / luk ventil</button>
      </div>
    </div>
  </main>

  <footer>
    &copy; Taphuset. Alle rettigheder forbeholdes.
  </footer>

  <script>
    async function hentData() {
      try {
        const respons = await fetch('data.json', { cache: "no-store" });
        const data = await respons.json();
        document.getElementById('liter').textContent = data.liter.toFixed(2) + ' L';
        document.getElementById('pris').textContent = data.total_price.toFixed(2) + ' DKK';
      } catch (error) {
        console.error('Fejl ved hentning af data:', error);
      }
    }

    function opdaterDatabase() {
      fetch('update.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: 'action=reset'
      })
      .then(res => {
        if (!res.ok) throw new Error("Fejl: " + res.status);
        return res.text();
      })
      .then(data => alert("Svar fra server: " + data))
      .catch(err => {
        alert("Noget gik galt: " + err.message);
        console.error(err);
  });
    }

    function toggleMotor() {
      fetch('motor.php', {
        method: 'POST'
      })
      .then(res => {
        if (!res.ok) throw new Error("Fejl: " + res.status);
        return res.text();
      })
      .then(data => alert("Svar fra server: " + data))
      .catch(err => {
        alert("Noget gik galt: " + err.message);
        console.error(err);
      });
    }

    hentData();
    setInterval(hentData, 1000);
  </script>

</body>
</html>
message.txt
5 KB
